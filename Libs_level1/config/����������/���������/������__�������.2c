///////////////////////////////////////////////////////////////////////
//Предопределенная процедура - вызывается при первом открытии формы
Процедура ПриОткрытии()

КонецПроцедуры

///////////////////////////////////////////////////////////////////////
//Предопределенная процедура - вызывается при закрытии формы
Процедура ПриЗакрытии()

КонецПроцедуры

///////////////////////////////////////////////////////////////////////
//Процедура обработки нажатия кнопки Закрыть - выполняет закрытие формы
Процедура ЗакрытьФорму()
	Форма.Закрыть();
КонецПроцедуры

//___________________________________________________________________________________________
Процедура ВывестиМассив(Мас,Префикс="")
	//Мас:Структура
	Для А=1 По РазмерСтруктуры(Мас) Цикл
		 Имя=Мас.ИдентификаторПоНомеру(А);
		 Мас2=Мас[Имя];
		 ТекПрефикс=Префикс+"["+Имя+"]";
		 Если ТипЗначения(Мас2)=5 Тогда
		 	ВывестиМассив(Мас2,ТекПрефикс);
		 Иначе
			 Сообщить(ТекПрефикс+"="+Мас[Имя]);
		 КонецЕсли
	КонецЦикла
	Для А=1 По РазмерМассива(Мас) Цикл
		 Имя=А;
		 Мас2=Мас[Имя];
		 ТекПрефикс=Префикс+"["+Имя+"]";
		 Если ТипЗначения(Мас2)=5 Тогда
		 	ВывестиМассив(Мас2,ТекПрефикс);
		 Иначе
			 Сообщить(ТекПрефикс+"="+Мас[Имя]);
		 КонецЕсли
	КонецЦикла
КонецПроцедуры
//
/////////////////////////////////////////////////////////////////////////
////Обработка события объекта 
Процедура Прочитать()
	Файл=СоздатьОбъект("ФайлМетаданных");
	Стр=Файл.ПрочитатьТекст("md:/Общие формы/"+ИмяОтчета);
	Сообщить("Текст модуля отчета:"+РазделительСтрок+Стр);

	Мас=Файл.ПрочитатьОбъект("md:/Общие формы/"+ИмяОтчета+".frm");
	Сообщить("Форма отчета:");
	ЗаголовокОтчета=Мас["Форма"]["Заголовок"];
	ВывестиМассив(Мас);
	
КонецПроцедуры

///////////////////////////////////////////////////////////////////////
//Обработка события объекта Редактировать
Процедура Редактировать()
	//работает только в режиме конфигурирования (иначе - открытие формы на исполнение)
	ОткрытьФормуРедактирования("md:/Общие формы/"+ИмяОтчета);
КонецПроцедуры

///////////////////////////////////////////////////////////////////////
//Обработка события объекта Открыть (исполнение)
Процедура Запуск()
	ОткрытьФорму("md:/Общие формы/"+ИмяОтчета);
КонецПроцедуры

///////////////////////////////////////////////////////////////////////
//Обработка события объекта Записать (изменение заголовка формы)
Процедура Записать()
	Файл=СоздатьОбъект("ФайлМетаданных");
	Мас=Файл.ПрочитатьОбъект("md:/Общие формы/"+ИмяОтчета+".frm");
	//меняем только заголовок формы...
	Мас["Форма"]["Заголовок"]=ЗаголовокОтчета;
	Файл.ЗаписатьОбъект("md:/Общие формы/"+ИмяОтчета+".frm",Мас);
КонецПроцедуры


ИмяОтчета="Тесты";
