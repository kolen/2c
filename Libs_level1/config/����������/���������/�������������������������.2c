///////////////////////////////////////////////////////////////////////
//Предопределенная процедура - вызывается при первом открытии формы
Процедура ПриОткрытии()
	//глВосстановитьЗначенияФормы(Контекст);
	Если ТипЗначенияСтр(Форма.Параметр)="СписокЗначений" Тогда
	    Выполнить();
	КонецЕсли
КонецПроцедуры

///////////////////////////////////////////////////////////////////////
//Предопределенная процедура - вызывается при закрытии формы
Процедура ПриЗакрытии()
//	Если СостояниеКлавиши(27) Тогда
//		СтатусВозврата(0);
//	КонецЕсли;
//	глЗапомнитьЗначенияФормы(Контекст);
КонецПроцедуры

///////////////////////////////////////////////////////////////////////
//Предопределенная процедура - вызывается при повторном открытии формы
Процедура ПриПовторномОткрытии()
КонецПроцедуры

///////////////////////////////////////////////////////////////////////
//Предопределенная процедура - вызывается при начале выбора значения
Процедура ПриНачалеВыбораЗначения(Идентификатор,ФлагСтандартнойОбработки)
КонецПроцедуры

///////////////////////////////////////////////////////////////////////
//Предопределенная процедура - вызывается при окончании выбора значения
Процедура ОбработкаВыбораЗначения(Значение,Идентификатор,ФлагСтандартнойОбработки)
КонецПроцедуры


///////////////////////////////////////////////////////////////////////
//Процедура обработки нажатия кнопки Закрыть - выполняет закрытие формы
Процедура ЗакрытьФорму()
	Форма.Закрыть();
КонецПроцедуры

///////////////////////////////////////////////////////////////////////
//Процедура обработки нажатия кнопки Выполнить
Процедура Выполнить()
	ЖД=СоздатьОбъект("ЖурналДокументов");
	//Очистить журнал
	ЖД.Запрос("delete from "+ЖД.ИмяТаблицыОбъекта("ID")+" where 1=1");
	Мета=СоздатьОбъект("Метаданные").Массив.Метаданные.Документ;
	Если РазмерСтруктуры(Мета) Тогда
		Для А=1 По РазмерСтруктуры(Мета) Цикл
			Вид=Мета.ИдентификаторПоНомеру(А);
			Док=СоздатьОбъект("Документ."+Вид);
			Состояние(Вид);
			Док.ВыбратьДокументы();
			Пока Док.ПолучитьДокумент()=1 Цикл
				ЖД.Новый();
			  	ЖД.ИДДок=Док.ПолучитьИдентификаторОбъекта();
			 	ЖД.ВидДок=Вид;
			 	ЖД.#IsPosted=Док.#IsPosted;
			 	ЖД.НомерДок=Док.НомерДок;
			 	ЖД.ДатаДок=Док.ДатаДок;
			 	ЖД.#ВремяДокумента=Док.#ВремяДокумента;
			 	ЖД.#IsDel=Док.#IsDel;
			 	ЖД.Записать();
			КонецЦикла;
		КонецЦикла
	КонецЕсли;		
КонецПроцедуры
