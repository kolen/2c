//Автор:  Alex_Bob 
//E-mail: asbobylk@svsokol.lipetsk.ru
//Версия модуля: 1.00 от 29.06.2004
//Релиз платформы: позже 09.06.2004

///////////////////////////////////////////////////////////////////////
//Предопределенная процедура - вызывается при первом открытии формы
Перем Пользователь;
Перем Режим;

Процедура ПриОткрытии()
    Конт=Форма.Параметр;
    Режим=-1;
    Если ТипЗначенияСтр(Конт)="СписокЗначений" Тогда
    	Пользователь=Конт.ПолучитьЗначение(1); 
    Иначе
         Форма.Закрыть(0);
    КонецЕсли;
  
КонецПроцедуры

///////////////////////////////////////////////////////////////////////
//Предопределенная процедура - вызывается при закрытии формы
Процедура ПриЗакрытии()
	Если Пароль<>Подтверждение Тогда
		Предупреждение("Неправильный ввод.Попробуйте еще раз.");
		СтатусВозврата(0); 
	КонецЕсли
	
	Сп=СоздатьОбъект("СписокЗначений");
    Сп.ДобавитьЗначение(Пароль);
    Сп.ДобавитьЗначение(Режим);
    ЗначениеВФайл(КаталогВременныхФайлов()+"\lst.txt",Сп);
//	Если СостояниеКлавиши(27) Тогда
//		СтатусВозврата(0);
//	КонецЕсли;
КонецПроцедуры

///////////////////////////////////////////////////////////////////////
//Процедура обработки нажатия кнопки Закрыть - выполняет закрытие формы
Процедура ЗакрытьФорму()
	Форма.Закрыть();
КонецПроцедуры

Процедура ПриНажатииОК()
	Режим=1; 
	ЗакрытьФорму();
КонецПроцедуры//ПриНажатииОК

Процедура ПриНажатииОтмена()
	Режим=0; 
	ЗакрытьФорму();
КонецПроцедуры//ПриНажатииОтмена

//___________________________________________________________________________________________
Функция Фраза()
	Возврат "Введите новый пароль для пользователя "+Пользователь;
КонецФункции//Фраза()
