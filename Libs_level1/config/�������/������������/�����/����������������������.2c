///////////////////////////////////////////////////////////////////////
//Предопределенная процедура - вызывается при первом открытии формы
Перем Пользователь;
Перем Польз;
Процедура ПриОткрытии()
	//глВосстановитьЗначенияФормы(Контекст);
	Польз=СоздатьОбъект("Пользователи");
	Польз.ВыбратьЭлементы();
	Пока Польз.ПолучитьЭлемент()=1 Цикл
		Пользователи.ДобавитьЗначение(Польз.Имя,Польз.Имя); 
	КонецЦикла
	Пользователи.ТекущаяСтрока(1);
	Пользователь=Пользователи.ПолучитьЗначение(1);
КонецПроцедуры

///////////////////////////////////////////////////////////////////////
//Предопределенная процедура - вызывается при закрытии формы
Процедура ПриЗакрытии()
    
//	Если СостояниеКлавиши(27) Тогда
//		СтатусВозврата(0);
//	КонецЕсли;
//	глЗапомнитьЗначенияФормы(Контекст);
КонецПроцедуры

///////////////////////////////////////////////////////////////////////
//Процедура обработки нажатия кнопки Закрыть - выполняет закрытие формы
Процедура ЗакрытьФорму()
	Форма.Закрыть();
КонецПроцедуры

///////////////////////////////////////////////////////////////////////
//Процедура обработки нажатия кнопки ОК
Процедура ПриНажатииОК()
    Проверка=0;
    Польз.УстановитьИмяИдентификатора("Имя");
    Польз.УстановитьИдентификаторОбъекта(Пользователь);
    Если Польз.НайтиЭлементВБД()=1 Тогда
        Если Польз.Пароль=GetHash(Пароль) Тогда
            НаборПрав=Польз.НаборПрав;
            ИмяПользователя(Пользователь);
			ПарольПользователя(Пароль);
    		ЗакрытьФорму(); 
        Иначе
        	Предупреждение("Неверное имя пользователя или пароль!");
        КонецЕсли;
    Иначе
        Предупреждение("Неверное имя пользователя или пароль!");
    КонецЕсли;
    
    
КонецПроцедуры

///////////////////////////////////////////////////////////////////////
//Процедура обработки нажатия кнопки ОК
Процедура ПриНажатииОтмена()
    ЗавершитьРаботуСистемы(); 
КонецПроцедуры

///////////////////////////////////////////////////////////////////////
//Процедура обработки выбора из списка пользователей
Процедура ПриВыбореПользователя()
    Пользователь=Пользователи.ПолучитьЗначение(Пользователи.ТекущаяСтрока()); 
КонецПроцедуры