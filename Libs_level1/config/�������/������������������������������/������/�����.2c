//Автор:  Alex_Bob 
//E-mail: asbobylk@svsokol.lipetsk.ru
//Версия модуля: 1.00 от 29.06.2004
//Релиз платформы: позже 09.06.2004

Перем ЗапросБД Экспорт;
Перем ИмяТаблицы  Экспорт;
Перем МассивРеквизитов Экспорт;
Перем МассивИмен Экспорт;
Перем СоответствияПолей Экспорт;
Перем БылаИнициализация Экспорт;

//******************************************************************************************
//Предопределенные процедуры и функции в режиме Предприятия
//******************************************************************************************

Процедура ПриНачалеРаботыСистемы()
	
	ПИ=СоздатьОбъект("ПанелиИнструментовПользователя");
	Если ПИ.КоличествоЭлементов()=0 Тогда
	    Интерфейс=СоздатьОбъект("Интерфейсы");
        Если Интерфейс.КоличествоЭлементов()>0 Тогда
        	Интерфейс.ВыбратьЭлементы();
        	Интерфейс.ПолучитьЭлемент();
        	АдмИнтерфейс=Интерфейс.ИД; 
        Иначе
            Интерфейс.Новый();
	    	Интерфейс.ИД=0x100000000*Интерфейс.НомерТаблицыОбъекта()+1;;
	    	Интерфейс.Имя="Администратор";
        	Интерфейс.Записать(); 	
        	АдмИнтерфейс=Интерфейс.ИД;
        КонецЕсли;
        ПИ.Новый();
        ПИ.ИД=0x100000000*ПИ.НомерТаблицыОбъекта()+1;
        Родитель=ПИ.ИД;
        ПИ.Интерфейс=АдмИнтерфейс;
        ПИ.Заголовок="Администрирование";
        ПИ.Родитель=0;
        ПИ.Позиция=1;
        ПИ.Команда="";
        ПИ.Параметр="";
        ПИ.Записать();
        ПИ.Новый();
        ПИ.ИД=0x100000000*ПИ.НомерТаблицыОбъекта()+2;
        ПИ.Интерфейс=АдмИнтерфейс;
        ПИ.Заголовок="Пользователи";
        ПИ.Пиктограмма=78;
        ПИ.Родитель=Родитель;
        ПИ.Позиция=2;
        ПИ.Команда="Объекты\Пользователи\Формы\СписокПользователей";
        ПИ.Параметр="";
        ПИ.Записать();
        ПИ.Новый();
        ПИ.ИД=0x100000000*ПИ.НомерТаблицыОбъекта()+3;
        ПИ.Интерфейс=АдмИнтерфейс;
        ПИ.Заголовок="Наборы прав";
        ПИ.Пиктограмма=368;
        ПИ.Родитель=Родитель;
        ПИ.Позиция=1;
        ПИ.Команда="Объекты\НаборыПрав\Формы\СписокНаборовПрав";
        ПИ.Параметр="";
        ПИ.Записать();
        ПИ.Новый();
        ПИ.ИД=0x100000000*ПИ.НомерТаблицыОбъекта()+4;
        ПИ.Интерфейс=АдмИнтерфейс;
        ПИ.Заголовок="Интерфейсы";
        ПИ.Пиктограмма=541;
        ПИ.Родитель=Родитель;
        ПИ.Позиция=3;
        ПИ.Команда="Объекты\Интерфейсы\Формы\СписокИнтерфейсов";
        ПИ.Параметр="";
        ПИ.Записать();
    КонецЕсли;    
КонецПроцедуры

Процедура ПриЗавершенииРаботыСистемы()

КонецПроцедуры 

Процедура НачальнаяИнициализация()Экспорт
	БылаИнициализация=1;

	ИмяТаблицы="toolbar";

	ТаблицаБД=СоздатьОбъект("ТаблицаБД");
	
	ТаблицаБД.ДобавитьПоле("ИД","Число",20,0);
	ТаблицаБД.ДобавитьПоле("Родитель","Число",20,0);
	ТаблицаБД.ДобавитьПоле("Позиция","Число",20,0);
	ТаблицаБД.ДобавитьПоле("Заголовок","Строка",100,0);
	ТаблицаБД.ДобавитьПоле("Пиктограмма","Число",4,0);
	ТаблицаБД.ДобавитьПоле("Объект","Строка",200,0);
	ТаблицаБД.ДобавитьПоле("Команда","Строка",200,0);
	ТаблицаБД.ДобавитьПоле("Параметр","Строка",200,0);
	ТаблицаБД.ДобавитьПоле("Модальность","Число",1,0);	
	ТаблицаБД.ДобавитьПоле("Интерфейс","Число",20,0);
	ТаблицаБД.НачальнаяИнициализация("ПанелиИнструментовПользователя",ИмяТаблицы,2,0);
	
КонецПроцедуры

//******************************************************************************************
//Предопределенные процедуры и функции в режиме Конфигуратора
//******************************************************************************************
Процедура ПриНачалеРаботыКонфигуратора()

КонецПроцедуры 


Процедура ПриЗавершенииРаботыКонфигуратора()

КонецПроцедуры 

