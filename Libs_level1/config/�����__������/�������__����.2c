//Функции форм
Перем ТестА Экспорт;
//___________________________________________________________________________________________
Процедура ЗаполнитьПараметрыВосстановления(ИмяФайла,Структура)
	ИмяФайла=КаталогПользователя()+"Формы.lst";
	Попытка
	ЗначениеИзФайла(ИмяФайла,Структура);
	Исключение
	КонецПопытки
	Если РазмерСтруктуры(Структура)=0 Тогда
		Структура=СоздатьОбъект("Структура");
	КонецЕсли
КонецПроцедуры

//___________________________________________________________________________________________
Процедура глВосстановитьЗначенияФормы(Конт)Экспорт
	Перем ВсяСтруктура,ИмяФайла;
	ЗаполнитьПараметрыВосстановления(ИмяФайла,ВсяСтруктура);
	
	ИмяФормы=Конт.Форма.Заголовок();
	Попытка
	ТекСтруктура=ЗначениеИзСтроки(ВсяСтруктура[ИмяФормы]);
	Исключение
	КонецПопытки
	Если РазмерСтруктуры(ТекСтруктура) Тогда
		Для А=1 По Конт.Форма.ПолучитьКоличествоАтрибутов()-1 Цикл//без Параметра
			Имя=Конт.Форма.ПолучитьИмяАтрибута(А);
			Если Сокрлп(Имя)<>"" Тогда
				Если Лев(Имя,8)<>"Элемент_" Тогда
					Если ТекСтруктура.НайтиИдентификатор(Имя) Тогда
						Попытка
						Конт.Форма.УстановитьАтрибут(Имя,ТекСтруктура[Имя]);
						Исключение
						КонецПопытки
					КонецЕсли
				КонецЕсли
			КонецЕсли
		КонецЦикла
	КонецЕсли
КонецПроцедуры

//___________________________________________________________________________________________
Процедура глЗапомнитьЗначенияФормы(Конт)Экспорт
	Перем ВсяСтруктура,ИмяФайла;
	ЗаполнитьПараметрыВосстановления(ИмяФайла,ВсяСтруктура);
	
	ТекСтруктура=СоздатьОбъект("Структура");
	Для А=1 По Конт.Форма.ПолучитьКоличествоАтрибутов()-1 Цикл//без Параметра
		Имя=Конт.Форма.ПолучитьИмяАтрибута(А);
		Значение=Конт.Форма.ПолучитьАтрибут(Имя);
		ТекСтруктура[Имя]=Значение;
	КонецЦикла
	ВсяСтруктура[Конт.Форма.Заголовок()]=ЗначениеВСтроку(ТекСтруктура);
	ЗначениеВФайл(ИмяФайла,ВсяСтруктура);
КонецПроцедуры
