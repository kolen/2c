Перем НовыйНомер Экспорт;
//******************************************************************************************
//Атрибуты объекта доступные через точку (переменные с признаком Экспорт)
//******************************************************************************************
//...

//******************************************************************************************
//Предопределенные процедуры и функции объекта
//******************************************************************************************
//Конструктор (вызывается при инициализации объекта)
//ВидОбъекта - вид объекта, задающийся строкой следуемой за символом "."
//Параметр - произвольный параметр (для визуальных элементов в него передается диалоговый элемент формы)
Процедура Конструктор(ВидОбъекта,Параметр)Экспорт
	//Префикс="";
	Инициализация("Нумератор");
КонецПроцедуры
//...

//******************************************************************************************
//Методы объекта (процедуры и функции с признаком Экспорт)
//******************************************************************************************
//...

//
////___________________________________________________________________________________________
//Функция ПолучитьНовыйНомер(ТипВид)
//	Перем Запрос;
//	
//	УстПрефикс=Префикс;
//	УстТипВид=ТипВид;
//	
//	Запрос=СоздатьОбъект("Запрос");
//	Текст="Номер=Нумератор.Значение;Условие (ТипВид=УстТипВид);Условие (Префикс=УстПрефикс);";
//	Запрос.Выполнить(Текст);
//	
//	Номер=0;
//	Если Запрос.ВыбратьСтроки()=1 Тогда
//		Если Запрос.ПолучитьСтроку()=1 Тогда
//			Номер=Запрос.Номер;
//		КонецЕсли
//	КонецЕсли
//	
//	Если Номер=0 Тогда
//		Новый();
//	КонецЕсли
//	Номер=Число(Номер)+1;
//	
//	УстановитьАтрибут("ТипВид",ТипВид);
//	УстановитьАтрибут("Префикс",Префикс);
//	УстановитьАтрибут("Значение",Номер);
//	Записать();
//	
//	Возврат Префикс+Номер;
//КонецФункции//ПолучитьНовыйНомер

//___________________________________________________________________________________________
Функция ПолучитьНовыйНомер(ТипВид,Префикс)Экспорт
	Перем Запрос;
	
	НачатьТранзакцию();
	
	ОчиститьУсловия();
	ДобавитьУсловие("ТипВид",ТипВид);
	ДобавитьУсловие("Префикс",Префикс);
	ВыбратьЭлементыБД(0,0);
	Если ПолучитьЭлемент()=1 Тогда
		Номер=1+Число(ПолучитьАтрибут("Значение"));
	Иначе
		Номер=1;
		Новый();
		УстановитьАтрибут("ТипВид",ТипВид);
		УстановитьАтрибут("Префикс",Префикс);
	КонецЕсли
	
	УстановитьАтрибут("Значение",Номер);
	Записать();
	
	ЗафиксироватьТранзакцию();

	НовыйНомер=Префикс+Номер;
	Возврат НовыйНомер;
КонецФункции//ПолучитьНовыйНомер
